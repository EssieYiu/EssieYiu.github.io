# XSS

## 基本概念和原理介绍

- 发生在web前端
- 钓鱼攻击、前端js挖矿、用户cookie获取

### 攻击流程

1. 访问xss页面，触发脚本

2. 执行脚本，发送窃取数据(cookie)

3. 伪造用户登录，造成破坏

### 类型

- 反射型
- 存储型
- DOM型

### 形成原因

程序对输入和输出的控制不够严格，脚本被当做有效代码执行

### 测试流程

1. 在目标站点上找输入点，如查询接口，留言板等
2. 输入一组“特殊字符+唯一识别符”，点击提交后，查看返回的源码，是否有做对应的处理
3. 通过搜索定位到唯一字符，结合唯一字符前后语法确认是否可以构造执行js的条件（构造闭合）
4. 提交构造的脚本代码（以及各种绕过姿势），看是否可以成功执行

TIPS：

1. 一般查询接口容易出现反射性XSS，留言板容易出现存储型XSS
2. 由于后台可能存在过滤措施，构造的script可能会被过滤掉，而无法生效，或者环境限制了执行（浏览器）
3. 通过变化不同的script，尝试绕过后台过滤机制

## 实例

ctrl+F查找html中是否有我们输入的唯一识别符及字符串

前端长度限制无意义，可以修改

get方式提交到后台，在url参数中提交

post方式，以表单方式放在请求体中

## 存储型XSS

刷新页面还存在，会存到数据库，每次访问都会触发

## DOM型XSS

DOM可以理解为访问HTML的标准接口

对dom进行了操作，然后输出。不与后端进行交互

若从url获取，可以在url中插入代码

##cookie获取及XSS后台使用

### cookie获取



### 钓鱼攻击

